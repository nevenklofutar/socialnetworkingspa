<mat-card class="mat-card">
    <mat-card-content>
        <div style="display: flex;">
            <div style="width: 97%;">
                <div class="post-content">({{ post.id }}) {{ post.body }}</div>
            </div>
            <div style="width: 3%;">
                <div class="post-content">
                    <a [matMenuTriggerFor]="menu" *ngIf="showDeleteButton()">
                        <mat-icon
                            class="material-icons"
                            style="cursor: pointer;"
                            >more_vert</mat-icon
                        >
                    </a>
                    <mat-menu #menu="matMenu">
                        <button
                            mat-menu-item
                            (click)="openPostDialogEdit(post)"
                        >
                            <span>Edit</span>
                        </button>
                        <button
                            mat-menu-item
                            (click)="openPostDialogDelete(post.id)"
                        >
                            <span>Delete</span>
                        </button>
                    </mat-menu>
                </div>
            </div>
        </div>

        <div class="post-comments-divider">
            <mat-divider></mat-divider>
        </div>

        <div
            class="post-actions"
            style="display: flex; text-align: center; margin-top: -9px;"
        >
            <div style="width: 190px; float: left;">
                <button
                    type="button"
                    mat-raised-button
                    (click)="toggleLike(post.id)"
                    [disabled]="disabled"
                    [class.spinner]="disabled"
                    style="width: 190px;"
                >
                    {{ likeButtonName }}
                </button>
            </div>
            <div
                style="
                    width: 190px;
                    height: auto;
                    text-align: center;
                    margin: auto;
                "
            >
                Likes: {{ this.post.likes.likesCount }}
            </div>
        </div>

        <div class="post-comments-divider">
            <mat-divider></mat-divider>
        </div>

        Comments
        <div *ngFor="let comment of post.comments">
            <div
                style="
                    width: 100%;
                    height: auto;
                    display: flex;
                    align-items: center;
                    position: relative;
                    margin-bottom: 5px;
                "
            >
                <div
                    style="
                        border: 1px solid darkgrey;
                        background-color: #eeeeee;
                        border-radius: 5px;
                        padding: 3px;
                        width: 100%;
                    "
                >
                    <div style="width: 98%;">
                        <span style="color: darkred; font-weight: bold;"
                            >{{ comment.commentedByName }}
                        </span>
                        <span>{{ comment.content }}</span>
                    </div>
                </div>

                <div
                    style="
                        width: 100%;
                        height: 100%;
                        position: absolute;
                        top: 0;
                        left: 0;
                        z-index: 9;
                        text-align: right;
                        margin-top: 5px;
                    "
                >
                    <a
                        [matMenuTriggerFor]="menu"
                        *ngIf="showCommentMenuButton(comment)"
                    >
                        <mat-icon
                            class="material-icons"
                            style="cursor: pointer;"
                            >more_horiz</mat-icon
                        >
                    </a>
                    <mat-menu #menu="matMenu">
                        <button
                            mat-menu-item
                            (click)="openCommentDialogEdit(comment)"
                        >
                            <span>Edit</span>
                        </button>
                        <button
                            mat-menu-item
                            (click)="
                                openCommentDialogDelete(
                                    (CommentToDelete = {
                                        commentId: comment.id,
                                        postId: post.id
                                    })
                                )
                            "
                        >
                            <span>Delete</span>
                        </button>
                    </mat-menu>
                </div>
            </div>
        </div>
        <form [formGroup]="newCommentForm" (keydown)="createComment($event)">
            <mat-form-field
                appearance="outline"
                color="primary"
                class="comment-input"
            >
                <input
                    matInput
                    formControlName="newComment"
                    maxlength="255"
                    cdkTextareaAutosize
                    placeholder="write comment..."
                />
            </mat-form-field>
        </form>
    </mat-card-content>
</mat-card>
